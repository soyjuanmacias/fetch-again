{"version":3,"file":"fetch-again.js","sources":["../index.js"],"sourcesContent":["const environment = (typeof module !== 'undefined' && module.exports) ? global : window;\n\n(function checkForFetch() {\n    const polyfillUrl = 'https://github.com/github/fetch';\n    if (!environment || !environment.fetch) {\n        throw new Error(`Seems that fetch is not supported in your environment, take a look at the polyfill here: ${polyfillUrl}`);\n    }\n})();\n\nenvironment.fetchAgain = function fetchAgain(url, requestLimit = 3, delay = 1000, fetchOptions = {}) {\n    return new Promise((resolve, reject) => {\n        function success(response) {\n            resolve(response);\n        }\n        function failure(error) {\n            requestLimit--;\n            if (requestLimit) {\n                setTimeout(callFetch, delay)\n            }\n            else {\n                reject(error);\n            }\n        }\n        function finalFailure(finalError) {\n            throw finalError;\n        }\n        function callFetch() {\n            return window.fetch(url, fetchOptions)\n                .then(success)\n                .catch(failure)\n                .catch(finalFailure);\n        }\n        callFetch();\n    });\n}\n\nexport default fetchAgain;\n\n"],"names":["environment","module","exports","global","window","checkForFetch","polyfillUrl","fetch","Error","fetchAgain","url","requestLimit","delay","fetchOptions","Promise","resolve","reject","success","response","failure","error","callFetch","finalFailure","finalError","then","catch"],"mappings":"AAAA,IAAMA,cAAe,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,OAAzC,GAAoDC,MAApD,GAA6DC,MAAjF;;AAEA,CAAC,SAASC,aAAT,GAAyB;QAChBC,cAAc,iCAApB;QACI,CAACN,WAAD,IAAgB,CAACA,YAAYO,KAAjC,EAAwC;cAC9B,IAAIC,KAAJ,+FAAsGF,WAAtG,CAAN;;CAHR;;AAOAN,YAAYS,UAAZ,GAAyB,SAASA,UAAT,CAAoBC,GAApB,EAA4E;QAAnDC,YAAmD,uEAApC,CAAoC;QAAjCC,KAAiC,uEAAzB,IAAyB;QAAnBC,YAAmB,uEAAJ,EAAI;;WAC1F,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;iBAC3BC,OAAT,CAAiBC,QAAjB,EAA2B;oBACfA,QAAR;;iBAEKC,OAAT,CAAiBC,KAAjB,EAAwB;;gBAEhBT,YAAJ,EAAkB;2BACHU,SAAX,EAAsBT,KAAtB;aADJ,MAGK;uBACMQ,KAAP;;;iBAGCE,YAAT,CAAsBC,UAAtB,EAAkC;kBACxBA,UAAN;;iBAEKF,SAAT,GAAqB;mBACVjB,OAAOG,KAAP,CAAaG,GAAb,EAAkBG,YAAlB,EACFW,IADE,CACGP,OADH,EAEFQ,KAFE,CAEIN,OAFJ,EAGFM,KAHE,CAGIH,YAHJ,CAAP;;;KAjBD,CAAP;CADJ;;;;"}